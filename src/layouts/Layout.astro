---
import Header from "@components/Others/Header.astro";
import Footer from "@components/Others/Footer.astro";
import Toggle from "@components/Others/Toggle.astro";
import "../styles/global.css";
import "../styles/torch-effect.css";

const { title } = Astro.props;
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      property="og:title"
      content="LareiraConf. El encuentro tech que enciende ideas y conecta comunidades"
    />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="images/1500x500.jpg" />
    <meta property="og:url" content="https://x.com/LareiraConf" />
    <meta
      property="og:description"
      content="El evento tech en A Coruña donde la comunidad se reúne para aprender, inspirarse y conectar. ¡Forma parte de esta experiencia!"
    />
    <meta property="og:site_name" content="LareiraConf" />
    <meta property="og:logo" content="images/L-2O7YyK_400x400.jpg" />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <title>{title}</title>
  </head>
  <body class="font-mono">
    <Toggle />
    <div class="torch-cursor dark-cave">
      <div class="torch-light"></div>
      <main class="content-mask">
        <slot />
        <Footer />
      </main>
    </div>
  </body>
</html>

<script is:inline>
  document.addEventListener("mousemove", function (e) {
    const torchLight = document.querySelector(".torch-light");
    const contentToMask = document.querySelector(".content-mask");

    if (torchLight && contentToMask) {
      torchLight.style.left = e.clientX + "px";
      torchLight.style.top = e.clientY + "px";
      torchLight.style.opacity = 1;

      const maskX = (e.clientX / window.innerWidth) * 100;
      const maskY = (e.clientY / window.innerHeight) * 100;
      const lightRadius = Math.min(window.innerWidth, window.innerHeight) * 0.3;

      const maskStyle = `radial-gradient(circle ${lightRadius}px at ${maskX}% ${maskY}%,
        black 10%,
        rgba(0,0,0,0.95) 20%,
        rgba(0,0,0,0.7) 40%,
        rgba(0,0,0,0.3) 60%,
        transparent 80%)`;

      contentToMask.style.mask = maskStyle;
      contentToMask.style.webkitMask = maskStyle;
    }
  });

  document.addEventListener("mouseleave", function () {
    const torchLight = document.querySelector(".torch-light");
    const contentToMask = document.querySelector(".content-mask");

    if (torchLight) torchLight.style.opacity = 0;

    const hideMask = "radial-gradient(circle 0px at 50% 50%, transparent 0%, transparent 100%)";
    if (contentToMask) {
      contentToMask.style.mask = hideMask;
      contentToMask.style.webkitMask = hideMask;
    }
  });
</script>

<style>
  main {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

</style>